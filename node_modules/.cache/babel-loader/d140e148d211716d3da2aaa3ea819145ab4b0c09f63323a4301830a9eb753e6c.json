{"ast":null,"code":"import axios from \"axios\";\nconst clientId = process.env.REACT_APP_ARTSY_CLIENT_ID;\nconst clientSecret = process.env.REACT_APP_ARTSY_CLIENT_SECRET;\nlet token = null;\nexport async function getToken() {\n  const cachedToken = sessionStorage.getItem(\"artsyToken\");\n  const expiry = sessionStorage.getItem(\"artsyTokenExpiry\");\n  if (cachedToken && expiry && Date.now() < parseInt(expiry)) {\n    return cachedToken;\n  }\n  const response = await axios.post(\"https://api.artsy.net/api/tokens/xapp_token\", {\n    client_id: clientId,\n    client_secret: clientSecret\n  });\n  const token = response.data.token;\n  const expiresAt = new Date(response.data.expires_at).getTime();\n  sessionStorage.setItem(\"artsyToken\", token);\n  sessionStorage.setItem(\"artsyTokenExpiry\", expiresAt.toString());\n  return token;\n}\nexport async function fetchArtworks() {\n  const token = await getToken();\n  const response = await axios.get(\"https://api.artsy.net/api/artworks?size=12\", {\n    headers: {\n      \"X-Xapp-Token\": token\n    }\n  });\n  return response.data._embedded.artworks;\n}","map":{"version":3,"names":["axios","clientId","process","env","REACT_APP_ARTSY_CLIENT_ID","clientSecret","REACT_APP_ARTSY_CLIENT_SECRET","token","getToken","cachedToken","sessionStorage","getItem","expiry","Date","now","parseInt","response","post","client_id","client_secret","data","expiresAt","expires_at","getTime","setItem","toString","fetchArtworks","get","headers","_embedded","artworks"],"sources":["/Users/dilyarakd/Desktop/BU/METCS601[Web Dev]/ArtProject/discover-art/src/api/artsy.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst clientId = process.env.REACT_APP_ARTSY_CLIENT_ID!;\nconst clientSecret = process.env.REACT_APP_ARTSY_CLIENT_SECRET!;\n\nlet token: string | null = null; \n\nexport async function getToken() {\n  const cachedToken = sessionStorage.getItem(\"artsyToken\");\n  const expiry = sessionStorage.getItem(\"artsyTokenExpiry\");\n\n  if (cachedToken && expiry && Date.now() < parseInt(expiry)) {\n    return cachedToken;\n  }\n\n  const response = await axios.post(\"https://api.artsy.net/api/tokens/xapp_token\", {\n    client_id: clientId,\n    client_secret: clientSecret\n  });\n\n  const token = response.data.token;\n  const expiresAt = new Date(response.data.expires_at).getTime();\n\n  sessionStorage.setItem(\"artsyToken\", token);\n  sessionStorage.setItem(\"artsyTokenExpiry\", expiresAt.toString());\n\n  return token;\n}\n\nexport async function fetchArtworks() {\n  const token = await getToken();\n  const response = await axios.get(\"https://api.artsy.net/api/artworks?size=12\", {\n    headers: { \"X-Xapp-Token\": token }\n  });\n  return response.data._embedded.artworks;\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAA0B;AACvD,MAAMC,YAAY,GAAGH,OAAO,CAACC,GAAG,CAACG,6BAA8B;AAE/D,IAAIC,KAAoB,GAAG,IAAI;AAE/B,OAAO,eAAeC,QAAQA,CAAA,EAAG;EAC/B,MAAMC,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;EACxD,MAAMC,MAAM,GAAGF,cAAc,CAACC,OAAO,CAAC,kBAAkB,CAAC;EAEzD,IAAIF,WAAW,IAAIG,MAAM,IAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGC,QAAQ,CAACH,MAAM,CAAC,EAAE;IAC1D,OAAOH,WAAW;EACpB;EAEA,MAAMO,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,6CAA6C,EAAE;IAC/EC,SAAS,EAAEjB,QAAQ;IACnBkB,aAAa,EAAEd;EACjB,CAAC,CAAC;EAEF,MAAME,KAAK,GAAGS,QAAQ,CAACI,IAAI,CAACb,KAAK;EACjC,MAAMc,SAAS,GAAG,IAAIR,IAAI,CAACG,QAAQ,CAACI,IAAI,CAACE,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC;EAE9Db,cAAc,CAACc,OAAO,CAAC,YAAY,EAAEjB,KAAK,CAAC;EAC3CG,cAAc,CAACc,OAAO,CAAC,kBAAkB,EAAEH,SAAS,CAACI,QAAQ,CAAC,CAAC,CAAC;EAEhE,OAAOlB,KAAK;AACd;AAEA,OAAO,eAAemB,aAAaA,CAAA,EAAG;EACpC,MAAMnB,KAAK,GAAG,MAAMC,QAAQ,CAAC,CAAC;EAC9B,MAAMQ,QAAQ,GAAG,MAAMhB,KAAK,CAAC2B,GAAG,CAAC,4CAA4C,EAAE;IAC7EC,OAAO,EAAE;MAAE,cAAc,EAAErB;IAAM;EACnC,CAAC,CAAC;EACF,OAAOS,QAAQ,CAACI,IAAI,CAACS,SAAS,CAACC,QAAQ;AACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}